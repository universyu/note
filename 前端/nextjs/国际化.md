# 国际化

- 安装依赖

`npm install next-intl`

- 配置文件

`next.config.mjs`

```mjs
import createNextIntlPlugin from 'next-intl/plugin';

const withNextIntl = createNextIntlPlugin()

/** @type {import('next').NextConfig} */
const nextConfig = {};

export default withNextIntl(nextConfig);
```



- i18n配置文件

`src/i18n.ts`

```ts
import {notFound} from 'next/navigation';
import {getRequestConfig} from 'next-intl/server';
 
export const locales = ['en', 'zh'];
 
export default getRequestConfig(async ({locale}) => {
  if (!locales.includes(locale as any)) notFound();
 
  return {
    messages: (await import(`./messages/${locale}.json`)).default
  };
});
```



- 中间件

`src/middleware.ts`

```ts
import createMiddleware from 'next-intl/middleware';
 import {locales} from './i18n'
export default createMiddleware({
  locales,
  defaultLocale: 'zh'
});
 
export const config = {
  matcher: ['/', '/(zh|en)/:path*']
};
```

