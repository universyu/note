# javaScript

### 执行上下文

执行上下问以函数为单位，其中的变量环境以函数为单位，其中的词法环境以块为单位

#### 词法作用域

由函数声明的位置决定，是静态作用域

#### 作用域链

变量环境中存了一个外部执行上下文的引用，作用域链由词法作用域决定

#### 变量查找顺序

先在词法环境中由栈顶找到栈底，然后在变量环境中查找，再顺着作用域链找其他执行上下文



### 闭包

由作用域链的特性，如果在一个函数内部有函数，那么内部的函数可以访问到外部函数的变量，即便外部函数已经调用结束。函数被内部函数保留引用的变量的集合称为此函数的闭包



### 变量提升

声明会被提升，而赋值不会，下面有两种定义函数的方式，只有第一种可以在定义之前使用

```js
function foo(){
    ...
}
    
var bar = function(){
    ...
}
```

在编译阶段会把带有声明的语句提出来，把声明的变量放到执行上下文的变量环境中，如果有多个，会保留最后一个，编译时只是会给变量留个位置，赋值语句要到执行阶段才会执行，另外，变量环境存储的是在当下这个函数体内部声明的变量







### 词法环境

用let或者const定义的变量，会在编译阶段放入执行上下文的词法环境中，按照块级作用域来存放，词法环境中也是栈结构