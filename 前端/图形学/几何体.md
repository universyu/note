## 隐式几何体

用方程描述三个坐标满足的关系式，好处是方便判断点是否在几何体之内

## 显式几何体

- 参数映射：把三个坐标都表示成函数，带入自变量直接得到坐标
- 直接给出各个点

## CSG （constructive solid geometry）

通过几何体的运算获得新的几何体


## 距离方程（signed distance function）

对任意一个点，给出它距离几何体的最近距离，几何体内部是负值，外部是正值，可以用来做边界运算


## obj 文件
文本文件，包含顶点坐标，各个面的法线，各个面上的顶点的纹理坐标，点之间的连接关系（三个点各自选一个法线和一个纹理坐标，一共九个数据构成一个连接关系）。


## 贝塞尔曲线

### 代数表达

属于显示几何体中的参数表达几何体，n+1 个控制点 $b_{0-n}$ 构成 n 阶曲线，任意 t 对应坐标为  $\sum_{i=0}^n\binom{n}{i}t^i(1-t)^{n-i}b_{i}$

### 原理

把点按照顺序两两连线，线上对应 t 比例处得到一点，又两两连续无限递归直到获取 t 唯一对应的点。

### 性质

- 控制点得到贝塞尔曲线后经历仿射变换的结果是控制点仿射变换后得到的贝塞尔曲线，但投影变换不具备这个性质

#### 凸包

包含所有顶点的最小凸多边形

贝塞尔曲线上的点必然在控制点的凸包之内

## 分段曲线

用拼接的方式表达贝塞尔曲线，一般用四个控制点表示一段曲线，三次贝塞尔曲线起点切线斜率为 $3(b_{1}-b_{0})$ 终点切线斜率为 $3(b_{3}-b_{2}$) ，如果要求出连续贝塞尔曲线，需要令转折点前后两点共线且抵达转折点等距


## 网格处理

### 网格细分

#### loop subdivision

只对三角面有用

##### 细分

取每个三角形的三边中点构成新的三角形

##### 调整

###### 新顶点

新顶点所在边的两个旧顶点记作 A 和 B ，此边关联的两个三角形还分别有一个顶点，记作 C 和 D ，新顶点的坐标更新为 $\frac{3}{8}(A+B)+\frac{1}{8}(C+D)$

###### 旧顶点

旧顶点连接了 n 个旧顶点（度为n），记 $u=\frac{1}{n}\left\{ \frac{5}{8}-\left[ \frac{3}{8}+\frac{1}{4}\cos\left( \frac{2\pi}{n} \right) \right]^2 \right\}$ ，旧顶点更新至 $1-nu *originPosition + u*neighborPositionSum


#### catmull-clark 算法

对于任何面都可以应用

##### 概念

- 边数不是四的都是非四边面
- 度不是四的都是奇异点

##### 细分及更新

每个面取一个面点，每条边取一个边点，每个面的面点与这个面各个边的边点相连。
第一次细分之后所有非四边面消失并产生等量的奇异点
 
计算面点坐标： 此面所有旧顶点的均值
更新后的边点坐标： 边有两个旧顶点，也过两个面可以算出两个面点，这四个点的平均
更新后的旧顶点坐标： 假设度为 n ，F 为点所过的所有面求出的面点的均值， R 为点过的所有边的中点（注意不是边点，是中点）的均值， V 是原坐标。 
$V^{'}=\frac{F+2R+(n-3)V}{n}$


### 网格简化

#### 边坍缩

把若干点捏合为一个点，令部分边消失以达到简化的效果。

##### 二次误差最小

把边变成点，原本与边相关的所有面和新点求距离，优化距离的平方和（即二次误差），令其最小。每条边都有一个最小二次误差，用优先队列维护，每次坍缩掉最小误差的边然后动态更新其它边的最小二次误差